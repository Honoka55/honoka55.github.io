<!DOCTYPE html>
<html dir="ltr" lang="ja">
<head><meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/><meta content="PHPã«ä»˜å±ã—ã¦ã„ãªã„ãƒãƒ«ãƒãƒã‚¤ãƒˆé–¢æ•°ã‚’ã„ãã¤ã‹è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚
" name="description"/><title>PHPã®ãƒãƒ«ãƒãƒã‚¤ãƒˆé–¢æ•°ã¸ã®ã„ãã¤ã‹ã®è¿½åŠ  - ç„”è‰²æ˜‡ç©ºã€è¯æ¡œè½å¡µ</title>
<link href="https://honoka55.github.io/ja/p/php-mb-ext/" rel="canonical"/>
<link href="/scss/style.min.d85b846c47d86db21b5d14048743d8f54a9fbb27c9428df98cff8ba5df4103ff.css" rel="stylesheet"/><meta content="PHPã®ãƒãƒ«ãƒãƒã‚¤ãƒˆé–¢æ•°ã¸ã®ã„ãã¤ã‹ã®è¿½åŠ " property="og:title"/>
<meta content="PHPã«ä»˜å±ã—ã¦ã„ãªã„ãƒãƒ«ãƒãƒã‚¤ãƒˆé–¢æ•°ã‚’ã„ãã¤ã‹è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚
" property="og:description"/>
<meta content="https://honoka55.github.io/ja/p/php-mb-ext/" property="og:url"/>
<meta content="ç„”è¯Honoka55" property="og:site_name"/>
<meta content="article" property="og:type"/><meta content="Post" property="article:section"/><meta content="PHP" property="article:tag"/><meta content="2022-12-13T00:00:00+00:00" property="article:published_time"/><meta content="2023-01-13T00:00:00+00:00" property="article:modified_time"/><meta content="https://s1.ax1x.com/2023/01/13/pSKigRs.png" property="og:image"/>
<meta content="PHPã®ãƒãƒ«ãƒãƒã‚¤ãƒˆé–¢æ•°ã¸ã®ã„ãã¤ã‹ã®è¿½åŠ " name="twitter:title"/>
<meta content="PHPã«ä»˜å±ã—ã¦ã„ãªã„ãƒãƒ«ãƒãƒã‚¤ãƒˆé–¢æ•°ã‚’ã„ãã¤ã‹è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚
" name="twitter:description"/><meta content="summary_large_image" name="twitter:card"/>
<meta content="https://s1.ax1x.com/2023/01/13/pSKigRs.png" name="twitter:image"/>
</head>
<body class="article-page">
<script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky">
<button aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ããƒ»é–‰ã˜ã‚‹" class="hamburger hamburger--spin" id="toggle-menu" type="button">
<span class="hamburger-box">
<span class="hamburger-inner"></span>
</span>
</button>
<header>
<figure class="site-avatar">
<a href="/ja">
<img alt="Avatar" class="site-logo" height="300" loading="lazy" src="/img/avatar_hu7d9b67be7ef950d905465e1960632c76_41038_300x0_resize_box_3.png" width="300"/>
</a>
<span class="emoji">ğŸ˜´</span>
</figure>
<div class="site-meta">
<h1 class="site-name"><a href="/ja">ç„”è¯Honoka55</a></h1>
<h2 class="site-description">ç„”è‰²æ˜‡ç©ºã€è¯æ¡œè½å¡µ</h2>
</div>
</header><ol class="social-menu">
<li>
<a href="https://space.bilibili.com/7398042" target="_blank" title="bilibili">
<svg class="icon icon-tabler icon-tabler-brand-github" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<style type="text/css">
	.st0{fill:none;}

</style>
<path class="st0" d="M17.4,18.9H6.7c-1.5,0-2.8-1.2-2.8-2.8V9.9c0-1.5,1.2-2.8,2.8-2.8h10.7c1.5,0,2.8,1.2,2.8,2.8v6.2
	C20.1,17.6,18.9,18.9,17.4,18.9z"></path>
<line class="st1" x1="7.4" x2="10.5" y1="4.1" y2="7.2"></line>
<line class="st1" x1="16.5" x2="13.4" y1="4.1" y2="7.2"></line>
<line class="st1" x1="9" x2="9" y1="12.1" y2="12.9"></line>
<line class="st1" x1="15.1" x2="15.1" y1="12.1" y2="12.9"></line>
</svg>
</a>
</li>
<li>
<a href="https://github.com/honoka55" target="_blank" title="GitHub">
<svg class="icon icon-tabler icon-tabler-brand-github" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
<path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"></path>
</svg>
</a>
</li>
<li>
<a href="http://zhs.glyphwiki.org/wiki/User:honoka55" target="_blank" title="GlyphWiki">
<svg class="icon icon-tabler icon-tabler-brand-glyphwiki" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<g>
<path d="M11.9,20.5l2-0.5l0.1,0l0.1,0l0.1-0.1l0,0l0-0.1l0-0.1l0-0.1l-1.5-4.7l-8.3,1.8l-0.1-0.4l8.3-1.8l-0.8-2.6l1.3-0.1l0.3-0.6
		l0.3-0.5l0.3-0.5l0.3-0.4l0.2-0.4L14.6,9l0.1-0.1L7,10.5l-0.1-0.4L15,8.3l0,0L15.1,8l0.1,0l0.3-0.4l1.4,0.7l-0.4,0.4l-0.6,0.5
		l-0.1,0.1l-0.3,0.3L15.2,10l-0.3,0.4l-0.4,0.4l-0.4,0.4l-0.4,0.4l-0.4,0.4L13.2,12l-0.1,0.1l0.6,2.1l6.1-1.4l0.7-1.2l1.5,0.7
		l0.1,0.4l-8.4,1.9l1.5,4.7l0.1,0.3l0,0.3l0,0.3l-0.1,0.3l-0.1,0.2l-0.2,0.2L15,20.9l-0.2,0.1l-0.2,0.1l-0.2,0.1l-0.2-0.6L12,20.8
		L11.9,20.5z M4,8.6l0.2,0.6l0.1,0.6l0,0.5l0,0.5l-0.1,0.5L4,11.6L3.8,12l-0.4,0.2l-0.5-0.1l-0.2-0.4l0.1-0.4L2.9,11l0.1-0.2
		l0.1-0.3l0.1-0.4l0.1-0.4l0-0.5l0-0.5L3.3,8L3.2,7.4L3,6.6l0.2-0.1l0.3,0.7l0.2,0.5L10,6.4l-1-3l1.3-0.1l0.4,0.1l-0.2,0.3l0.8,2.5
		l6.6-1.5l0-0.1l0,0l0,0L18.3,4l1.4,0.7l-0.4,0.4l-0.3,0.2L19,5.4l-0.1,0.3l-0.1,0.3l-0.1,0.4l-0.2,0.4l-0.2,0.4l-0.2,0.4L17.9,8
		l-0.2,0.4l-0.2-0.1l0.1-0.5l0.1-0.5L17.7,7l0.1-0.4l0-0.4l0-0.4l0-0.3l0-0.3l0-0.1l-14,3.1L4,8.6z"></path>
</g>
</svg>
</a>
</li>
</ol><ol class="menu" id="main-menu">
<li>
<a href="/ja/">
<svg class="icon icon-tabler icon-tabler-home" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<polyline points="5 12 3 12 12 3 21 12 19 12"></polyline>
<path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"></path>
<path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"></path>
</svg>
<span>ãƒ›ãƒ¼ãƒ </span>
</a>
</li>
<li>
<a href="/ja/search/">
<svg class="icon icon-tabler icon-tabler-search" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<circle cx="10" cy="10" r="7"></circle>
<line x1="21" x2="15" y1="21" y2="15"></line>
</svg>
<span>æ¤œç´¢</span>
</a>
</li>
<li>
<a href="/ja/tools/">
<svg class="icon icon-tabler icon-tabler-tool" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
<path d="M7 10h3v-3l-3.5 -3.5a6 6 0 0 1 8 8l6 6a2 2 0 0 1 -3 3l-6 -6a6 6 0 0 1 -8 -8l3.5 3.5"></path>
</svg>
<span>ãƒ„ãƒ¼ãƒ«</span>
</a>
</li>
<li>
<a href="/ja/about/">
<svg class="icon icon-tabler icon-tabler-user" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<circle cx="12" cy="7" r="4"></circle>
<path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path>
</svg>
<span>ç§ã«ã¤ã„ã¦</span>
</a>
</li>
<li>
<a href="/ja/links/">
<svg class="icon icon-tabler icon-tabler-link" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path>
<path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path>
</svg>
<span>ãƒªãƒ³ã‚¯</span>
</a>
</li>
<div class="menu-bottom-section">
<li id="i18n-switch">
<svg class="icon icon-tabler icon-tabler-language" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
<path d="M4 5h7"></path>
<path d="M9 3v2c0 4.418 -2.239 8 -5 8"></path>
<path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"></path>
<path d="M12 20l4 -9l4 9"></path>
<path d="M19.1 18h-6.2"></path>
</svg>
<select name="language" onchange="window.location.href = this.selectedOptions[0].value">
<option value="https://honoka55.github.io/">ä¸­æ–‡</option>
<option selected="" value="https://honoka55.github.io/ja/">æ—¥æœ¬èª</option>
</select>
</li>
<li id="dark-mode-toggle">
<svg class="icon icon-tabler icon-tabler-toggle-left" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<circle cx="8" cy="12" r="2"></circle>
<rect height="12" rx="6" width="20" x="2" y="6"></rect>
</svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<circle cx="16" cy="12" r="2"></circle>
<rect height="12" rx="6" width="20" x="2" y="6"></rect>
</svg>
<span>ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰</span>
</li>
</div>
</ol>
</aside>
<main class="main full-width">
<article class="has-image main-article">
<header class="article-header">
<div class="article-image">
<a href="/ja/p/php-mb-ext/">
<img alt="Featured image of post PHPã®ãƒãƒ«ãƒãƒã‚¤ãƒˆé–¢æ•°ã¸ã®ã„ãã¤ã‹ã®è¿½åŠ " loading="lazy" src="https://s1.ax1x.com/2023/01/13/pSKigRs.png"/>
</a>
</div>
<div class="article-details">
<header class="article-category">
<a href="/ja/categories/%E3%82%B3%E3%83%BC%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0/">
                ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°
            </a>
</header>
<div class="article-title-wrapper">
<h2 class="article-title">
<a href="/ja/p/php-mb-ext/">PHPã®ãƒãƒ«ãƒãƒã‚¤ãƒˆé–¢æ•°ã¸ã®ã„ãã¤ã‹ã®è¿½åŠ </a>
</h2>
</div>
<footer class="article-time">
<div>
<svg class="icon icon-tabler icon-tabler-calendar-time" fill="none" height="56" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="56" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4"></path>
<circle cx="18" cy="18" r="4"></circle>
<path d="M15 3v4"></path>
<path d="M7 3v4"></path>
<path d="M3 11h16"></path>
<path d="M18 16.496v1.504l1 1"></path>
</svg>
<time class="article-time--published">2022å¹´12æœˆ13å·</time>
</div>
</footer>
<footer class="article-translations">
<svg class="icon icon-tabler icon-tabler-language" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
<path d="M4 5h7"></path>
<path d="M9 3v2c0 4.418 -2.239 8 -5 8"></path>
<path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"></path>
<path d="M12 20l4 -9l4 9"></path>
<path d="M19.1 18h-6.2"></path>
</svg>
<div>
<a class="link" href="https://honoka55.github.io/p/php-mb-ext/" lang="zh-cn">ä¸­æ–‡</a>
</div>
</footer>
</div>
</header>
<section class="article-content">
<p>PHPã«ä»˜å±ã—ã¦ã„ãªã„ãƒãƒ«ãƒãƒã‚¤ãƒˆé–¢æ•°ã‚’ã„ãã¤ã‹è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚</p>
<p>PHPã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä»˜å±ã—ã¦ã„ã‚‹mbstringæ‹¡å¼µãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€UTF-8ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æ‰±ã†ãŸã‚ã«<code>mb_</code>ã§å§‹ã¾ã‚‹ã„ãã¤ã‹ã®<a class="link" href="https://www.php.net/manual/ja/ref.mbstring.php" rel="noopener" target="_blank">ãƒãƒ«ãƒãƒã‚¤ãƒˆé–¢æ•°</a>ã‚’å‚™ãˆã¦ã„ã¾ã™ã€‚</p>
<p>ä¾‹ãˆã°UTF-8ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ã¯ã€ã©ã¡ã‚‰ã‚‚æ–‡å­—åˆ—ã®é•·ã•ã‚’è¿”ã™é–¢æ•°ãŒã€<code>strlen("ç„”è¯Honoka55")</code>ã¯14ï¼ˆBMPæ¼¢å­—1æ–‡å­—ã¯3ãƒã‚¤ãƒˆï¼‰ã€<code>mb_strlen("ç„”è¯Honoka55")</code>ã¯10ï¼ˆ1æ¼¢å­—ã¯1æ–‡å­—ã¨æ•°ãˆã‚‹ï¼‰ã‚’è¿”ã—ã¾ã™ã€‚</p>
<p>ã—ã‹ã—ã€mbstringæ‹¡å¼µã«å‚™ãˆã¦ã„ã‚‹é–¢æ•°ã¯ãã‚Œã»ã©è±Šå¯Œã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä»¥ä¸‹ã¯ã€ç­†è€…ãŒå­¦æ ¡ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚³ãƒ¼ã‚¹è¨­è¨ˆã§ä½¿ç”¨ã—ã¦ã„ã‚‹ã„ãã¤ã‹ã®è¿½åŠ é–¢æ•°ã§ã™ã€‚</p>
<h2 id="mb_substr_replace">mb_substr_replace</h2>
<p>mbstringæ‹¡å¼µã«ã¯<a class="link" href="https://www.php.net/manual/ja/function.mb-substr.php" rel="noopener" target="_blank"><code>mb_substr</code></a>ã¨ã„ã†é–¢æ•°ãŒã‚ã‚Šã¾ã™ãŒã€<a class="link" href="https://www.php.net/manual/ja/function.substr-replace.php" rel="noopener" target="_blank"><code>substr_replace</code></a>é–¢æ•°ã®ã€Œmbç‰ˆã€ã¯å­˜åœ¨ã—ã¾ã›ã‚“ã€‚</p>
<p>é–¢æ•°<code>substr_replace</code>ã¯æ–‡å­—åˆ—ã®ä¸€éƒ¨ã‚’ç½®æ›ã™ã‚‹ã‚‚ã®ã§ã™ã€‚ä¾‹ãˆã°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">echo</span> <span class="nx">substr_replace</span><span class="p">(</span><span class="s1">'nidema zai Nihon!'</span><span class="p">,</span><span class="s1">'Shanghai'</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€<code>'nidema zai Nihon!'</code>ã®11æ–‡å­—ç›®ã‹ã‚‰ã®5æ–‡å­—ã‚’<code>'Shanghai'</code>ã§ç½®æ›ã—ã€ã€Œnidema zai Shanghai!ã€ã¨å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“Unicodeæ–‡å­—ã«ã¤ã„ã¦ã¯ã€ã“ã®ãƒãƒ«ãƒãƒã‚¤ãƒˆã§ãªã„é–¢æ•°ã§ã¯æœŸå¾…é€šã‚Šã«æ‰±ãˆãªã„ã§ã™ã€‚</p>
<p>ã“ã®é–¢æ•°ã®ãƒãƒ«ãƒãƒã‚¤ãƒˆç‰ˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">mb_substr_replace</span><span class="p">(</span><span class="nv">$string</span><span class="p">,</span> <span class="nv">$replace</span><span class="p">,</span> <span class="nv">$offset</span><span class="p">,</span> <span class="nv">$length</span> <span class="o">=</span> <span class="k">null</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="nx">preg_match_all</span><span class="p">(</span><span class="s1">'/./us'</span><span class="p">,</span> <span class="nv">$string</span><span class="p">,</span> <span class="nv">$ar</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">preg_match_all</span><span class="p">(</span><span class="s1">'/./us'</span><span class="p">,</span> <span class="nv">$replace</span><span class="p">,</span> <span class="nv">$rar</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$length</span> <span class="o">=</span> <span class="nx">is_int</span><span class="p">(</span><span class="nv">$length</span><span class="p">)</span> <span class="o">?</span> <span class="nv">$length</span> <span class="o">:</span> <span class="nx">mb_strlen</span><span class="p">(</span><span class="nv">$string</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">array_splice</span><span class="p">(</span><span class="nv">$ar</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nv">$offset</span><span class="p">,</span> <span class="nv">$length</span><span class="p">,</span> <span class="nv">$rar</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">implode</span><span class="p">(</span><span class="nv">$ar</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3>ä½¿ç”¨ä¾‹</h3>
<p>ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯æ–‡å­—åˆ—ã®2æ–‡å­—ç›®ã‚’ã€Œâ—‹ã€ã«å¤‰æ›´ã™ã‚‹ã‚‚ã®ã§ã™ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">echo</span> <span class="nx">mb_substr_replace</span><span class="p">(</span><span class="s1">'ç°å¤ªç‹¼'</span><span class="p">,</span> <span class="s1">'â—‹'</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// ã€Œç°â—‹ç‹¼ã€ã‚’å‡ºåŠ›
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="mb_fgetc">mb_fgetc</h2>
<p><a class="link" href="https://www.php.net/manual/ja/function.fgetc.php" rel="noopener" target="_blank"><code>fgetc</code></a>é–¢æ•°ã«ã‚‚ãƒãƒ«ãƒãƒã‚¤ãƒˆç‰ˆãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã“ã®é–¢æ•°ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ã‹ã‚‰1æ–‡å­—å–ã‚Šå‡ºã™ã‚‚ã®ã§ã™ã€‚ã‚‚ã¡ã‚ã‚“ã€æ­£ç¢ºã«ã¯1ãƒã‚¤ãƒˆã§ã™ã€‚ä»¥ä¸‹ã¯ã€ãã®ãƒãƒ«ãƒãƒã‚¤ãƒˆç‰ˆã‚’å®Ÿè£…ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">function</span> <span class="nf">mb_fgetc</span><span class="p">(</span><span class="nv">$stream</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$mask</span> <span class="o">=</span> <span class="p">[</span><span class="mi">192</span><span class="p">,</span> <span class="mi">224</span><span class="p">,</span> <span class="mi">240</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$ch</span> <span class="o">=</span> <span class="nx">fgetc</span><span class="p">(</span><span class="nv">$stream</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nv">$ch</span><span class="p">)</span> <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$buf</span> <span class="o">=</span> <span class="nv">$ch</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">((</span><span class="nx">ord</span><span class="p">(</span><span class="nv">$ch</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nv">$mask</span><span class="p">[</span><span class="nv">$i</span><span class="p">])</span> <span class="o">!=</span> <span class="nv">$mask</span><span class="p">[</span><span class="nv">$i</span><span class="p">])</span> <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$buf</span> <span class="o">.=</span> <span class="nx">fgetc</span><span class="p">(</span><span class="nv">$stream</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nv">$buf</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ã“ã“ã§ã¯ã€1ãƒã‚¤ãƒˆç›®ã¨ãƒã‚¹ã‚¯ã‚’ãƒ“ãƒƒãƒˆã”ã¨ã«ANDã‚’å–ã£ã¦ã€1æ–‡å­—ã‚’èª­ã¿è¾¼ã‚€ãŸã‚ã«èª­ã¿è¾¼ã‚€å¿…è¦ãŒã‚ã‚‹ãƒã‚¤ãƒˆæ•°ã‚’æ±ºå®šã—ã¾ã™ã€‚ãƒã‚¹ã‚¯ã¨ã¯ã€192ãŒUï¼‹0080ã€œUï¼‹07FFï¼ˆ2ãƒã‚¤ãƒˆï¼‰ã€224ãŒUï¼‹0800ã€œUï¼‹FFFFï¼ˆ3ãƒã‚¤ãƒˆï¼‰ã€240ãŒUï¼‹10000ã€œUï¼‹1FFFFFï¼ˆ4ãƒã‚¤ãƒˆï¼‰ã«ãƒãƒƒãƒã™ã‚‹ã‚‚ã®ã§ã™ã€‚</p>
<h3>ä½¿ç”¨ä¾‹</h3>
<p>ã“ã“ã§ã¯ã€èª­ã¿è¾¼ã‚€ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ãŒã€Œè‰ğŸ˜‚ã€ï¼ˆ<code>U+8349</code> <code>U+1F602</code>ï¼‰ã§å§‹ã¾ã‚‹ã¨ã—ã¾ã™ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma" tabindex="0"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma" tabindex="0"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$fp</span> <span class="o">=</span> <span class="nx">fopen</span><span class="p">(</span><span class="nv">$_FILES</span><span class="p">[</span><span class="s1">'file'</span><span class="p">][</span><span class="s1">'tmp_name'</span><span class="p">],</span> <span class="s1">'r'</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nx">mb_fgetc</span><span class="p">(</span><span class="nv">$fp</span><span class="p">);</span> <span class="c1">// ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ã®1æ–‡å­—ç›®ã€Œè‰ã€ã‚’èª­ã¿è¾¼ã‚“ã§å‡ºåŠ›
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">echo</span> <span class="nx">mb_fgetc</span><span class="p">(</span><span class="nv">$fp</span><span class="p">);</span> <span class="c1">// ãƒ•ã‚¡ã‚¤ãƒ«ãƒã‚¤ãƒ³ã‚¿ã®2æ–‡å­—ç›®ã€ŒğŸ˜‚ã€ã‚’èª­ã¿è¾¼ã‚“ã§å‡ºåŠ›
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ä»–ã«ã‚‚æ—¢å­˜ã®ãƒãƒ«ãƒãƒã‚¤ãƒˆç‰ˆãŒãªã„é–¢æ•°ã¯å¤šãã‚ã‚Šã¾ã™ãŒã€ã‚‚ã—é­é‡ã—ãŸå ´åˆã¯ãã‚Œãã‚Œå€‹åˆ¥ã«åˆ†æã—ã¦ãã ã•ã„ã€‚</p>
</section>
<footer class="article-footer">
<section class="article-tags">
<a href="/ja/tags/php/">PHP</a>
</section>
<section class="article-lastmod">
<svg class="icon icon-tabler icon-tabler-clock" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<circle cx="12" cy="12" r="9"></circle>
<polyline points="12 7 12 12 15 15"></polyline>
</svg>
<span>
            æœ€çµ‚æ›´æ–° 2023å¹´1æœˆ13å·
        </span>
</section></footer>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css" integrity="sha256-J+iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s=" rel="stylesheet"/><script crossorigin="anonymous" defer="" integrity="sha256-InsNdER1b2xUewP+pKCUJpkhiqwHgqiPXDlIk7GzBu4=" src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js">
</script><script crossorigin="anonymous" defer="" integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI=" src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js">
</script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
</article>
<aside class="related-content--wrapper">
<h2 class="section-title">é–¢é€£ã™ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h2>
<div class="related-content">
<div class="flex article-list--tile">
<article class="has-image">
<a href="/ja/p/cpp-mariadb-link/">
<div class="article-image">
<img data-hash="https://s1.ax1x.com/2023/01/12/pSuG5DO.png" data-key="" loading="lazy" src="https://s1.ax1x.com/2023/01/12/pSuG5DO.png"/>
</div>
<div class="article-details">
<h2 class="article-title">C++ã‹ã‚‰MariaDBã¸ã®æ¥ç¶š</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<div id="gitalk-container"></div>
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.18.0/js/md5.min.js"></script>
<script>
    if ("ja" == "zh-cn"){
        lang = "zh-CN"
    }else{
        lang = "ja"
    }
    gitalk = new Gitalk({
        clientID: "4c243dc52ffe119cd15f",
        clientSecret: "886ddf6875b4e153196f12e011ab9477c8db556c",
        repo: "gitalk-comments",
        owner: "Honoka55",
        admin: ["Honoka55"],
        distractionFreeMode: false, 
        id: md5(location.pathname), 
        language: lang,
    });
    (function () {
        if (
            ["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1
        ) {
            document.getElementById("gitalk-container").innerHTML =
                "Gitalk comments not available by default when the website is previewed locally.";
            return;
        }
        gitalk.render("gitalk-container");
    })();
</script>
<footer class="site-footer">
<section class="copyright">
        ğŸ„¯ 
        
            2019 - 
        
        2023 ç„”è¯Honoka55
    </section>
<section class="powerby">
        Built with <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo</a> <br/>
        Theme <b><a data-version="3.14.0" href="https://github.com/CaiJimmy/hugo-theme-stack" rel="noopener" target="_blank">Stack</a></b> designed by <a href="https://jimmycai.com" rel="noopener" target="_blank">Jimmy</a>
</section>
<button class="top-button" id="top-button" onclick="smoothScrollTop()">â¬† TOP</button>
</footer>
<div aria-hidden="true" class="pswp" role="dialog" tabindex="-1">
<div class="pswp__bg"></div>
<div class="pswp__scroll-wrap">
<div class="pswp__container">
<div class="pswp__item"></div>
<div class="pswp__item"></div>
<div class="pswp__item"></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class="pswp__top-bar">
<div class="pswp__counter"></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title="Share"></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class="pswp__preloader">
<div class="pswp__preloader__icn">
<div class="pswp__preloader__cut">
<div class="pswp__preloader__donut"></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class="pswp__share-tooltip"></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class="pswp__caption">
<div class="pswp__caption__center"></div>
</div>
</div>
</div>
</div><script crossorigin="anonymous" defer="" integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js">
</script><script crossorigin="anonymous" defer="" integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js">
</script><link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css" rel="stylesheet"/><link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css" rel="stylesheet"/>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class="widget-icon">
<svg class="icon icon-tabler icon-tabler-hash" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" stroke="none"></path>
<line x1="5" x2="19" y1="9" y2="9"></line>
<line x1="5" x2="19" y1="15" y2="15"></line>
<line x1="11" x2="7" y1="4" y2="20"></line>
<line x1="17" x2="13" y1="4" y2="20"></line>
</svg>
</div>
<h2 class="widget-title section-title">ç›®æ¬¡</h2>
<div class="widget--toc">
<nav id="TableOfContents">
<ol>
<li><a href="#mb_substr_replace">mb_substr_replace</a></li>
<li><a href="#mb_fgetc">mb_fgetc</a></li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script crossorigin="anonymous" integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js">
</script><script defer="" src="/ts/main.js" type="text/javascript"></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=M+PLUS+1p:wght@400;700&text=ãã‚ãƒã„ã…ã†ã‡ãˆã‰ãŠã‹ãŒããããã‘ã’ã“ã”ã•ã–ã—ã˜ã™ãšã›ãœãããŸã ã¡ã¢ã£ã¤ã¥ã¦ã§ã¨ã©ãªã«ã¬ã­ã®ã¯ã°ã±ã²ã³ã´ãµã¶ã·ã¸ã¹ãºã»ã¼ã½ã¾ã¿ã‚€ã‚ã‚‚ã‚ƒã‚„ã‚…ã‚†ã‚‡ã‚ˆã‚‰ã‚Šã‚‹ã‚Œã‚ã‚ã‚ã‚ã‚‘ã‚’ã‚“ã‚”ã‚•ã‚–ã‚™ã‚šã‚›ã‚œã‚ã‚ã‚Ÿã‚ ã‚¡ã‚¢ã‚£ã‚¤ã‚¥ã‚¦ã‚§ã‚¨ã‚©ã‚ªã‚«ã‚¬ã‚­ã‚®ã‚¯ã‚°ã‚±ã‚²ã‚³ã‚´ã‚µã‚¶ã‚·ã‚¸ã‚¹ã‚ºã‚»ã‚¼ã‚½ã‚¾ã‚¿ãƒ€ãƒãƒ‚ãƒƒãƒ„ãƒ…ãƒ†ãƒ‡ãƒˆãƒ‰ãƒŠãƒ‹ãƒŒãƒãƒãƒãƒãƒ‘ãƒ’ãƒ“ãƒ”ãƒ•ãƒ–ãƒ—ãƒ˜ãƒ™ãƒšãƒ›ãƒœãƒãƒãƒŸãƒ ãƒ¡ãƒ¢ãƒ£ãƒ¤ãƒ¥ãƒ¦ãƒ§ãƒ¨ãƒ©ãƒªãƒ«ãƒ¬ãƒ­ãƒ®ãƒ¯ãƒ°ãƒ±ãƒ²ãƒ³ãƒ´ãƒµãƒ¶ãƒ·ãƒ¸ãƒ¹ãƒºãƒ»ãƒ¼ãƒ½ãƒ¾ãƒ¿ã‡°ã‡±ã‡²ã‡³ã‡´ã‡µã‡¶ã‡·ã‡¸ã‡¹ã‡ºã‡»ã‡¼ã‡½ã‡¾ã‡¿ğ›€€ğ›€&display=swap";
        customFont.type = "text/css";
        customFont.rel = "stylesheet";
        document.head.appendChild(customFont);
    }());
</script>
<script crossorigin="anonymous" src="https://unpkg.com/twemoji@latest/dist/twemoji.min.js"></script>
<script>twemoji.parse(document.body,{"base":"https://cdn.jsdelivr.net/gh/twitter/twemoji/assets/","ext":".svg","folder":"svg"})</script>
<script>
    window.onscroll = function() {scrollTopButton()};
    function scrollTopButton() {
      if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
        document.getElementById("top-button").style.display = "block";
      } else {
        document.getElementById("top-button").style.display = "none";
      }
    }
    function smoothScrollTop(){
        var timer  = null;
        cancelAnimationFrame(timer);
        timer = requestAnimationFrame(function fn(){
            var oTop = document.body.scrollTop || document.documentElement.scrollTop;
            if(oTop > 0){
                document.body.scrollTop = document.documentElement.scrollTop = oTop - 50;
                timer = requestAnimationFrame(fn);
            }else{
                cancelAnimationFrame(timer);
            }
        });
    }
</script>
</body>
</html>
